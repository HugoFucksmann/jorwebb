{"version":3,"sources":["helpers/auth.js","pages/login.js"],"names":["localStorage","getItem","headers","this","token","usuario","password","props","a","console","log","process","axios","post","then","resp","setItem","data","history","push","catch","err","alert","authenticated","removeItem","get","Login","useState","setUsuario","setPassword","auth","login","Grid","container","spacing","direction","alignItems","justify","style","minHeight","Paper","elevation","flexDirection","display","padding","TextField","variant","id","label","marginBottom","value","onChange","e","target","Button","disabled","length","color","onClick","handleSubmit"],"mappings":"yNAsDe,M,mFAnDX,WACI,OAAOA,aAAaC,QAAQ,UAAY,K,mBAE5C,WACI,MAAO,CACHC,QAAS,CACL,UAAWC,KAAKC,U,0DAK5B,WAAYC,EAASC,EAAUC,GAA/B,SAAAC,EAAA,6DACIC,QAAQC,IAAR,UAAeC,mCAAf,WADJ,kBAGcC,IACDC,KADC,UACOF,mCADP,UAC0C,CACxCN,UACAC,aAEHQ,MAAK,SAACC,GACHf,aAAagB,QAAQ,QAASD,EAAKE,KAAKb,OAExCG,EAAMW,QAAQC,KAAK,aAEtBC,OAAM,SAACC,GACJZ,QAAQC,IAAIW,GACZC,MAAM,qBAAsB,GAAI,YAfhD,sDAkBQb,QAAQC,IAAR,MAlBR,wD,+EAsBA,SAAOH,GACHJ,KAAKoB,eAAgB,EACrBhB,EAAMW,QAAQC,KAAK,KACnBnB,aAAawB,WAAW,W,0BAG5B,WACI,OAAOZ,IACFa,IADE,UACKd,mCADL,gBAC8CR,KAAKD,SACrDY,MAAK,SAACC,GAAD,OAAUN,QAAQC,IAAIK,U,aCiBzBW,UA1DD,SAACnB,GACX,MAA8BoB,mBAAS,IAAvC,mBAAOtB,EAAP,KAAgBuB,EAAhB,KACA,EAAgCD,mBAAS,IAAzC,mBAAOrB,EAAP,KAAiBuB,EAAjB,KAFqB,4CAQrB,sBAAArB,EAAA,sDACIsB,EAAKC,MAAM1B,EAASC,EAAUC,GADlC,4CARqB,sBAYrB,OACI,cAACyB,EAAA,EAAD,CACIC,WAAS,EACTC,QAAS,EACTC,UAAU,SACVC,WAAW,SACXC,QAAQ,SACRC,MAAO,CAAEC,UAAW,SANxB,SAQI,eAACC,EAAA,EAAD,CACIC,UAAW,EACXH,MAAO,CACHI,cAAe,SACfC,QAAS,OACTC,QAAS,IALjB,UAQI,cAACC,EAAA,EAAD,CACIC,QAAQ,WACRC,GAAG,iBACHC,MAAM,UACNV,MAAO,CAAEW,aAAc,IACvBC,MAAO7C,EACP8C,SAAU,SAACC,GAAD,OAAOxB,EAAWwB,EAAEC,OAAOH,UAEzC,cAACL,EAAA,EAAD,CACIC,QAAQ,WACRC,GAAG,iBACHC,MAAM,kBACNV,MAAO,CAAEW,aAAc,IACvBC,MAAO5C,EACP6C,SAAU,SAACC,GAAD,OAAOvB,EAAYuB,EAAEC,OAAOH,UAE1C,cAACI,EAAA,EAAD,CACIC,WAzCLlD,EAAQmD,OAAS,GAAKlD,EAASkD,OAAS,GA0CnCV,QAAQ,YACRW,MAAM,UACNC,QAAS,kBAjDJ,0CAiDUC,IAJnB","file":"static/js/7.298c8d19.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nclass Auth {\r\n    get token() {\r\n        return localStorage.getItem('token') || '';\r\n    }\r\n    get headers() {\r\n        return {\r\n            headers: {\r\n                'x-token': this.token\r\n            }\r\n        };\r\n    }\r\n\r\n    async login(usuario, password, props) {\r\n        console.log(`${process.env.REACT_APP_URL}/login`);\r\n        try {\r\n            await axios\r\n                .post(`${process.env.REACT_APP_URL}/login`, {\r\n                    usuario,\r\n                    password\r\n                })\r\n                .then((resp) => {\r\n                    localStorage.setItem('token', resp.data.token);\r\n                    //this.authenticated = true;\r\n                    props.history.push('/fform');\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                    alert('error al loguearse', '', 'error');\r\n                });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    logout(props) {\r\n        this.authenticated = false;\r\n        props.history.push('/');\r\n        localStorage.removeItem('token');\r\n    }\r\n\r\n    validarToken() {\r\n        return axios\r\n            .get(`${process.env.REACT_APP_URL}/login/renew`, this.headers)\r\n            .then((resp) => console.log(resp));\r\n    }\r\n\r\n    /* isAuthenticated() {\r\n    console.log(this.authenticated);\r\n    return this.authenticated\r\n  } */\r\n}\r\n\r\nexport default new Auth();\r\n","import React, { useState } from 'react';\r\nimport { Button, Grid, Paper, TextField } from '@material-ui/core';\r\nimport auth from '../helpers/auth';\r\n\r\nconst Login = (props) => {\r\n    const [usuario, setUsuario] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    function validateForm() {\r\n        return usuario.length > 0 && password.length > 0;\r\n    }\r\n\r\n    async function handleSubmit() {\r\n        auth.login(usuario, password, props);\r\n    }\r\n\r\n    return (\r\n        <Grid\r\n            container\r\n            spacing={0}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            justify=\"center\"\r\n            style={{ minHeight: '100vh' }}\r\n        >\r\n            <Paper\r\n                elevation={5}\r\n                style={{\r\n                    flexDirection: 'column',\r\n                    display: 'flex',\r\n                    padding: 60\r\n                }}\r\n            >\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    id=\"standard-basic\"\r\n                    label=\"Usuario\"\r\n                    style={{ marginBottom: 20 }}\r\n                    value={usuario}\r\n                    onChange={(e) => setUsuario(e.target.value)}\r\n                />\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    id=\"standard-basic\"\r\n                    label=\" ContraseÃ±a \"\r\n                    style={{ marginBottom: 20 }}\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                <Button\r\n                    disabled={!validateForm()}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={() => handleSubmit()}\r\n                >\r\n                    Acceder\r\n                </Button>\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}